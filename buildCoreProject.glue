delete project flu

create project flu "A GLUE project for influenzaviruses" --minVersion 1.1.41

run file glue/build/core/fluSchemaExtensions.glue

project flu

  # load project settings
  run file glue/build/core/projectSettings.glue

  # create modules
  run file glue/build/core/fluModules.glue

  # Define genome features
  run file glue/build/core/fluFeatures.glue

  # Import sequences 
  run file glue/build/core/fluImportSources.glue

  # Import sequence-associated data
  run file glue/build/core/fluLoadSequenceData.glue

  # Import isolate data and link to imported sequences
  run script glue/build/core/fluLoadIsolateDataNcbiRefseqs.js

  # Define species master reference sequences
  run file glue/build/core/fluReferences.glue
  run file glue/build/core/fluReferencesIavSubtypes.glue
  run file glue/build/core/fluReferencesIbvSubtypes.glue

  # Do segment recognition
  run script glue/build/core/doSegmentRecognitionIav.js
  run script glue/build/core/doSegmentRecognitionIbv.js
  #run script glue/build/core/doSegmentRecognitionIcv.js
  #run script glue/build/core/doSegmentRecognitionIdv.js

  # Define feature locations on master reference sequences
  run file glue/build/core/fluFeatureLocations.glue

  # Define constrained alignment tree
  run file glue/build/core/fluAlignmentTree.glue

  # Import alignments
  run file glue/build/core/fluLoadUnconstrainedAlignments.glue

  # Derive constrained alignments from unconstrained alignments (cross-species)
  run file glue/build/core/fluDeriveConstrainedMsasRoot.glue

  # Compute IAV and IBV inter-subtype alignments
  run file glue/build/core/fluComputeAlignmentsIav.glue
  run file glue/build/core/fluComputeAlignmentsIbv.glue

  # Compute IAV and IBV inter-subtype phylogenies



  # Validate
  validate

exit
