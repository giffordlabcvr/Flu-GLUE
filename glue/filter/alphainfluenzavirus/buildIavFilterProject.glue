delete project alphainfluenza_filter

create project alphainfluenza_filter "GLUE project for filtering alphainfluenzavirus data" --minVersion 1.1.41

schema-project alphainfluenza_filter

  run file glue/filter/alphainfluenzavirus/iavFilterSchemaExtensions.glue
  exit

project alphainfluenza_filter

  # Create extension modules  
  run file glue/filter/alphainfluenzavirus/iavFilterModules.glue

  # Import sources 
  run file glue/filter/alphainfluenzavirus/iavFilterLoadSources.glue

  # Import data from GenBank XML
  module iavFilterGenbankXmlPopulator populate
 
  # Import tabular data (e.g. strain-level daya including isolate info and corrections)
  # TODO


  # Define references
  run file glue/filter/alphainfluenzavirus/iavFilterReferences.glue

  # Run segment recogniser
  run script glue/filter/alphainfluenzavirus/doSegmentRecognition.js
    
  # Run genotyping procedures
  run script glue/filter/alphainfluenzavirus/doSegment1Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment2Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment3Genotying.js  
  run script glue/filter/alphainfluenzavirus/doSegment4Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment5Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment6Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment7Genotying.js
  run script glue/filter/alphainfluenzavirus/doSegment8Genotying.js
   
  # Validate
  validate

  exit

